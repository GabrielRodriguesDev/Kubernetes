apiVersion: apps/v1                       
kind: Deployment                          
metadata:                                 
  namespace: gabriel                      
  name: goserver               
  labels:                                 
    app: goserver              
spec:                                     
  replicas: 2                             
  selector:                               
    matchLabels:                          
      app: goserver                  
  template:                               
    metadata:                 
      labels:                 
        app: goserver  
    spec:                     
      containers:             
        - name: goserver      
          image: "gabrielrodriguesdev/hello-go:0.0.4" 
          envFrom:                                                  #Definindo que as variavéis de ambiente virão de uma fonte externa
            - configMapRef:                                         #Definindo que as variavéis virão de um ConfigMap
                name: goserver-env                                  #Nome do objeto que possui essas configurações
            
---
apiVersion: v1
kind: Service
metadata:
  namespace: gabriel
  name: goserver-service
spec:
  selector: 
    app: goserver
  type: ClusterIP
  ports:
    - name: goserver-service
      port: 80
      targetPort: 80
      protocol: TCP